{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6a7a1e26_52fbbc4d",
        "filename": "recipes/recipe_modules/bot_update/api.py",
        "patchSetId": 2
      },
      "lineNbr": 243,
      "author": {
        "id": 1167909
      },
      "writtenOn": "2021-01-22T18:17:48Z",
      "side": 1,
      "message": "IIRC, bot_update is called on trybots, and if tests fail, it\u0027s called again with patch\u003dFalse to check if failures are because of existing issues or because of the CL.\nIf we\u0027re trying a patch on branches other than the default (e.g. refs/branch-heads), it might happen that the second time it\u0027s called with patch\u003dFalse it will sync to the wrong ref (the default instead of refs/branch-heads).\nNot sure if this would happen, but would like to make sure.\n\nWhy is this change needed?",
      "range": {
        "startLine": 243,
        "startChar": 43,
        "endLine": 243,
        "endChar": 53
      },
      "revId": "ab7b9aa23fef98a3af34d0c511287fd4b90c4239",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14f99af4_c3e34790",
        "filename": "recipes/recipe_modules/bot_update/api.py",
        "patchSetId": 2
      },
      "lineNbr": 243,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2021-01-22T18:29:19Z",
      "side": 1,
      "message": "That\u0027s a good point. I suppose it wouldn\u0027t be resolved to HEAD in that case, but definitely worth verifying. Do you happen to know an easy way to find such builds or should I make a merge conflict in release-branch in order to test it?\n\nAs for this fix, this is needed because recipe roller calls bot_update for upstream and downstream repo. Branch is always HEAD, and cl is then inspected. However, cl shouldn\u0027t looked if is not triggering repository. I\u0027ll add this to description on next update.\n\nhttps://source.chromium.org/chromium/infra/infra/+/master:recipes/recipes/recipe_roll_tryjob.py;l\u003d191",
      "parentUuid": "6a7a1e26_52fbbc4d",
      "range": {
        "startLine": 243,
        "startChar": 43,
        "endLine": 243,
        "endChar": 53
      },
      "revId": "ab7b9aa23fef98a3af34d0c511287fd4b90c4239",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}