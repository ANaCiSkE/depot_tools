{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4546e93b_c7b124e1",
        "filename": "gsutil.py",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 1529602
      },
      "writtenOn": "2023-02-16T22:29:08Z",
      "side": 1,
      "message": "The reland handles the case of the binary file returned through the stdout.",
      "revId": "d8fdd3919add0effdecff09beaf46c521843da41",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8a6ca779_87692697",
        "filename": "gsutil.py",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 1560543
      },
      "writtenOn": "2023-02-16T22:41:01Z",
      "side": 1,
      "message": "why not just use sys.stdout.buffer.write for everything and get rid of try/except?",
      "parentUuid": "4546e93b_c7b124e1",
      "revId": "d8fdd3919add0effdecff09beaf46c521843da41",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d4a7d58e_89286f67",
        "filename": "gsutil.py",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 1529602
      },
      "writtenOn": "2023-02-16T22:42:38Z",
      "side": 1,
      "message": "```\n\u003e\u003e\u003e sys.stdout.buffer.write(\u0027hello\u0027)\nTraceback (most recent call last):\n  File \"\u003cstdin\u003e\", line 1, in \u003cmodule\u003e\nTypeError: a bytes-like object is required, not \u0027str\u0027\n```\n\nThis only works for bytes.",
      "parentUuid": "8a6ca779_87692697",
      "revId": "d8fdd3919add0effdecff09beaf46c521843da41",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88bfb4ea_46201949",
        "filename": "gsutil.py",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 1560543
      },
      "writtenOn": "2023-02-16T22:45:56Z",
      "side": 1,
      "message": "but p.stdout is always a byte sequence, isn\u0027t it?",
      "parentUuid": "d4a7d58e_89286f67",
      "revId": "d8fdd3919add0effdecff09beaf46c521843da41",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fb00429c_7d3c9284",
        "filename": "gsutil.py",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 1529602
      },
      "writtenOn": "2023-02-16T22:49:18Z",
      "side": 1,
      "message": "Technically yeah but we don\u0027t want that output to be printed like bytes.\n```\n\u003e\u003e\u003e sys.stdout.buffer.write(b\u0027hello world\u0027)\nhello world11\n```\n\npython writes the size of the byte string to the output. This seems okay with bytes but for standard log, I want to keep it just a standard utf-8 string.",
      "parentUuid": "88bfb4ea_46201949",
      "revId": "d8fdd3919add0effdecff09beaf46c521843da41",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1ffd873_737af5ab",
        "filename": "gsutil.py",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 1560543
      },
      "writtenOn": "2023-02-16T22:54:24Z",
      "side": 1,
      "message": "Not really. In this particular case, it does, but only because you are using interactive shell. The return value of sys.stdout.buffer.write(b\u0027hello world\u0027) is 11, which gets printed to shell.\n\nI suppose if you do `_ \u003d sys.stdout.buffer.write(b\u0027hello world\u0027)` you won\u0027t see 11 appended.",
      "parentUuid": "fb00429c_7d3c9284",
      "revId": "d8fdd3919add0effdecff09beaf46c521843da41",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "80ea4a1d_ef345713",
        "filename": "gsutil.py",
        "patchSetId": 3
      },
      "lineNbr": 211,
      "author": {
        "id": 1529602
      },
      "writtenOn": "2023-02-16T23:01:04Z",
      "side": 1,
      "message": "Ah, I didn\u0027t realize that. I will remove the try block.",
      "parentUuid": "c1ffd873_737af5ab",
      "revId": "d8fdd3919add0effdecff09beaf46c521843da41",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}