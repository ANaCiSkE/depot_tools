{
  "comments": [
    {
      "key": {
        "uuid": "dc70fdd6_8fd9de15",
        "filename": "autoninja",
        "patchSetId": 7
      },
      "lineNbr": 20,
      "author": {
        "id": 1116017
      },
      "writtenOn": "2018-11-27T00:43:24Z",
      "side": 1,
      "message": "In case you miss my previous comments:\n\n- Don\u0027t we warn before really uploading ninjalog?\n- Don\u0027t we have the way to opt out?",
      "revId": "617f0fd169501d657ef431d3f4e65f61ad24876c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a63046c9_bc0ac5b6",
        "filename": "autoninja",
        "patchSetId": 7
      },
      "lineNbr": 20,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2018-11-27T05:54:43Z",
      "side": 1,
      "message": "Hmm, I somehow failed to receive your previous comment.\n\nI added another script that does similar behavior with gclient metrics to addresses your question.",
      "parentUuid": "dc70fdd6_8fd9de15",
      "revId": "617f0fd169501d657ef431d3f4e65f61ad24876c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f4a760f9_02a7066b",
        "filename": "autoninja",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2018-11-26T22:13:41Z",
      "side": 1,
      "message": "This seems somewhat dodgy, particularly if you want to run this on a bot. I\u0027m pretty sure the processes above will block if there\u0027s still child processes running. I also think you probably *would* want this to run synchronously on a bot.",
      "revId": "617f0fd169501d657ef431d3f4e65f61ad24876c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5240108e_1fc91b87",
        "filename": "autoninja",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2018-11-26T22:43:14Z",
      "side": 1,
      "message": "ninja_log from bots is uploaded already from recipe. And I don\u0027t want to collect ninja log from bots in this path.\n\nAlso autoninja is not used in bots currently. If we use autoninja on bots, I\u0027d like to introduce a flag disabling this behavior on bots.",
      "parentUuid": "f4a760f9_02a7066b",
      "revId": "617f0fd169501d657ef431d3f4e65f61ad24876c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "096d33a0_830a8996",
        "filename": "autoninja",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1107806
      },
      "writtenOn": "2018-11-27T00:34:31Z",
      "side": 1,
      "message": "\u003e Also autoninja is not used in bots currently. If we use autoninja on bots, I\u0027d like to introduce a flag disabling this behavior on bots.\n\nMy idea is different.  We already have Chromium build bots using autoninja, and I plan to migrate all ninja usage to autoninja in near future.",
      "parentUuid": "5240108e_1fc91b87",
      "revId": "617f0fd169501d657ef431d3f4e65f61ad24876c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "385e00fc_305a46e8",
        "filename": "autoninja",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2018-11-27T05:54:43Z",
      "side": 1,
      "message": "OK, then let me opt out this future in buildbot.",
      "parentUuid": "096d33a0_830a8996",
      "revId": "617f0fd169501d657ef431d3f4e65f61ad24876c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b71ad7ab_b524b08f",
        "filename": "autoninja",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2018-11-28T03:02:20Z",
      "side": 1,
      "message": "Okay. \n\nI still think this is kind of weird behavior; I wouldn\u0027t expect something to still be running in the background after \u0027autoninja\u0027 had \"completed\". How long does an upload typically take?",
      "parentUuid": "5240108e_1fc91b87",
      "revId": "617f0fd169501d657ef431d3f4e65f61ad24876c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0bfba29c_e9970ef0",
        "filename": "autoninja",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2018-11-28T03:16:39Z",
      "side": 1,
      "message": "It took 10 seconds, due to BQ insertion is processed synchronously in server. I expect it took several seconds if I optimize server implementation. But ninjalog can be several ten MB and sending such a large data to AppEngine won\u0027t be so fast.\nSo I choose not to block autoninja user. Similar behavior is taken for gclient metrics sending.\nhttps://cs.chromium.org/chromium/tools/depot_tools/metrics.py?l\u003d180\u0026rcl\u003d44d4b29082f0d8bacacd623f91c4d29637b4b901",
      "parentUuid": "b71ad7ab_b524b08f",
      "revId": "617f0fd169501d657ef431d3f4e65f61ad24876c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c98ab4b4_20c2c2fe",
        "filename": "autoninja",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1001907
      },
      "writtenOn": "2018-11-28T18:28:53Z",
      "side": 1,
      "message": "(just a side note, AppEngine has a MAXIMUM request size of 32MB.  \"Each incoming HTTP request can be no larger than 32MB.\" - https://cloud.google.com/appengine/quotas#Requests. If we expect logs larger than that, we should talk about streaming these to logdog, which can have arbitrary sizes)",
      "parentUuid": "0bfba29c_e9970ef0",
      "revId": "617f0fd169501d657ef431d3f4e65f61ad24876c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "87f30a7b_ac62aa79",
        "filename": "autoninja",
        "patchSetId": 7
      },
      "lineNbr": 22,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2018-11-28T23:21:18Z",
      "side": 1,
      "message": "Currently, 32MB is sufficient for gzipped ninjalog. If chromium grows further, I\u0027ll consider the other way e.g. logdog. Thanks.",
      "parentUuid": "c98ab4b4_20c2c2fe",
      "revId": "617f0fd169501d657ef431d3f4e65f61ad24876c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}