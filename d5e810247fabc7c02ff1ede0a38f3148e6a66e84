{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ed10f896_0c56a6f5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2022-12-02T01:14:55Z",
      "side": 1,
      "message": "I defer to danakj@ for this. Once @danakj approves it, ping me via this CL again and I\u0027ll either approve it or get someone else to (I\u0027m in the middle of getting re-added as an OWNER).",
      "revId": "d5e810247fabc7c02ff1ede0a38f3148e6a66e84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62044811_772a47bf",
        "filename": "rustfmt.py",
        "patchSetId": 2
      },
      "lineNbr": 40,
      "author": {
        "id": 1000887
      },
      "writtenOn": "2022-12-01T15:19:45Z",
      "side": 1,
      "message": "This TODO is now obsolete I think, there\u0027s no rust_prefix",
      "range": {
        "startLine": 38,
        "startChar": 0,
        "endLine": 40,
        "endChar": 0
      },
      "revId": "d5e810247fabc7c02ff1ede0a38f3148e6a66e84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23d1d494_5bca5903",
        "filename": "rustfmt.py",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1000887
      },
      "writtenOn": "2022-12-01T15:18:29Z",
      "side": 1,
      "message": "This is what should be changed, I believe rather than adding a hook.\n\nThe path to the compiler we built is now: third_party/rust-toolchain/bin/rustfmt",
      "range": {
        "startLine": 41,
        "startChar": 28,
        "endLine": 41,
        "endChar": 50
      },
      "revId": "d5e810247fabc7c02ff1ede0a38f3148e6a66e84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e315bc23_845a7823",
        "filename": "rustfmt.py",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1493367
      },
      "writtenOn": "2022-12-02T05:30:44Z",
      "side": 1,
      "message": "It\u0027s not that simple. This toolchain is only available on Linux:\n```\n\u0027fetch_prebuilt_chromium_rust_toolchain\u0027: \u0027use_rust and host_os \u003d\u003d \"linux\"\u0027,\n...\n{\n  # Update prebuilt Rust toolchain.\n  \u0027name\u0027: \u0027rust-toolchain\u0027,\n  \u0027pattern\u0027: \u0027.\u0027,\n  \u0027condition\u0027: \u0027fetch_prebuilt_chromium_rust_toolchain\u0027,\n  \u0027action\u0027: [\u0027python3\u0027, \u0027src/tools/rust/update_rust.py\u0027],\n},\n```\n\n`android_rust_toolchain` is available on Linux even with `use_rust \u003d False`:\n```\n  \u0027src/third_party/android_rust_toolchain/toolchain\u0027: {\n    \u0027packages\u0027: [\n      {\n        \u0027package\u0027: \u0027chromium/third_party/android_rust_toolchain/linux-amd64\u0027,\n        \u0027version\u0027: \u0027rMU9JFlwRfB-5VEWgDPRFYme5sXSnsHPSE3uQXf1xBQC\u0027,\n      },\n    ],\n    \u0027dep_type\u0027: \u0027cipd\u0027,\n    # TODO(https://crbug.com/1292038): gate this on use_rust as well as host_os.\n    \u0027condition\u0027: \u0027host_os \u003d\u003d \"linux\"\u0027,\n  },\n```\n\nI don\u0027t think I\u0027m the right person to solve these inconsistencies.\n\nWe (Brave) use custom Rust integration and we would like to have `rustfmt` to work on all platforms (Linux, Mac, Windows) in presubmit checks. Currently this is not possible without a workaround.",
      "parentUuid": "23d1d494_5bca5903",
      "range": {
        "startLine": 41,
        "startChar": 28,
        "endLine": 41,
        "endChar": 50
      },
      "revId": "d5e810247fabc7c02ff1ede0a38f3148e6a66e84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "88a18fd9_ab3a9e22",
        "filename": "rustfmt.py",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1000887
      },
      "writtenOn": "2022-12-02T16:04:44Z",
      "side": 1,
      "message": "Sounds like you\u0027re ahead of us a bit.\n\nI suggest\na) Change it to the built-by-us toolchain path because that will become available on Windows/Mac in the future.\nb) Carry a patch downstream in Brave to use the env var as you do here, which you can then stop carrying eventually.\n\nWDYT?",
      "parentUuid": "e315bc23_845a7823",
      "range": {
        "startLine": 41,
        "startChar": 28,
        "endLine": 41,
        "endChar": 50
      },
      "revId": "d5e810247fabc7c02ff1ede0a38f3148e6a66e84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53fba938_93ca6804",
        "filename": "rustfmt.py",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1493367
      },
      "writtenOn": "2022-12-02T17:04:23Z",
      "side": 1,
      "message": "\u003e a) Change it to the built-by-us toolchain path because that will become available on Windows/Mac in the future.\n\nSure, we can do that.\n\n\u003e b) Carry a patch downstream in Brave to use the env var as you do here, which you can then stop carrying eventually.\n\nWell, we don\u0027t have to patch `depot_tools` before, so we don\u0027t have the patch machinery setup for it.\n\nI guess if I\u0027ll put the built-by-you toolchain path, then we can just put manually `rustfmt` at this location for now and be happy.",
      "parentUuid": "88a18fd9_ab3a9e22",
      "range": {
        "startLine": 41,
        "startChar": 28,
        "endLine": 41,
        "endChar": 50
      },
      "revId": "d5e810247fabc7c02ff1ede0a38f3148e6a66e84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0e9d4cea_58b0f620",
        "filename": "rustfmt.py",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1000887
      },
      "writtenOn": "2022-12-02T17:31:32Z",
      "side": 1,
      "message": "Ok, cool. Thank you",
      "parentUuid": "53fba938_93ca6804",
      "range": {
        "startLine": 41,
        "startChar": 28,
        "endLine": 41,
        "endChar": 50
      },
      "revId": "d5e810247fabc7c02ff1ede0a38f3148e6a66e84",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}