{
  "comments": [
    {
      "key": {
        "uuid": "43bd7180_11e7a3c0",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1100,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-17T01:44:46Z",
      "side": 1,
      "message": "I don\u0027t actually understand what hierarchy() is supposed to do; the while loop on 1102 makes it difficult for me to understand what is going on is there supposed to be a +\u003d somewhere instead of an \u003d, maybe?\n\nAt least as far as flatten goes, what I think I want to see is which DEPS file produced each dependency or hook. Ideally, we\u0027d print this once for each *group* of dependencies (i.e., once per each DEPS file), rather than for each dependency. And, if I understand correctly, this routine will be called for each dependency? But, this might also be complicated by the ordering of dependencies and hooks, maybe?\n\nOTOH, maybe Michael and/or other consumers of flattened DEPS files would rather see a comment per dependency?",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4eb03c40_ec0f9481",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1100,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2017-05-17T03:41:30Z",
      "side": 1,
      "message": "I hadn\u0027t really envisioned any additional comments in the flattened DEPS, but I\u0027m not opposed to it, and seeing the example in the test case, I think it could be handy (for instance, it probably would have saved me some time just today figuring out which DEPS file the \"src/pdf: None\" buildspec entry came from, which gclient validate was complaining about).",
      "parentUuid": "43bd7180_11e7a3c0",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f45478e4_6a43ce0f",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1100,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-18T16:23:59Z",
      "side": 1,
      "message": "I think it\u0027s most straightforward to keep one comment per dependency.\n\nIn the 1102 loop, note \"out\" is referenced on the right-hand side of \"%\". It looks correct to me (and I\u0027m not changing existing code there).",
      "parentUuid": "4eb03c40_ec0f9481",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "af462cea_9bcb4614",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1100,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-18T17:47:18Z",
      "side": 1,
      "message": "Ah, right, I wasn\u0027t following the code correctly.",
      "parentUuid": "f45478e4_6a43ce0f",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6160de04_5a3af7d1",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1645,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-17T01:44:46Z",
      "side": 1,
      "message": "I wonder if it makes more sense to split this into two commands, one to flatten and one to check for unpinned revs? I don\u0027t really know the answer here, just a thought.",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a049cbab_c76e68db",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1645,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2017-05-17T03:41:30Z",
      "side": 1,
      "message": "Maybe \"--require-pinned-revisions\" could be a flag on \u0027validate\u0027 instead?",
      "parentUuid": "6160de04_5a3af7d1",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "abc8ec49_a375e5cb",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1645,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-18T16:23:59Z",
      "side": 1,
      "message": "Dirk, this is based on your earlier https://codereview.chromium.org/2474543002/ and mirrors the approach used in that CL.\n\nI don\u0027t have a strong opinion either way.",
      "parentUuid": "a049cbab_c76e68db",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "874a7777_39965ef0",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1645,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-18T17:47:18Z",
      "side": 1,
      "message": "I don\u0027t have a strong opinion either. I\u0027m happy to leave as-is and we can change later if need be.",
      "parentUuid": "abc8ec49_a375e5cb",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "07bedeb1_dc9a012e",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1649,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2017-05-16T19:02:23Z",
      "side": 1,
      "message": "I\u0027m not sure I would require this, although it\u0027s not a big deal either way. It might be convenient sometimes to output to stdout, like to quickly grep through the flattened DEPS.",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "089fe91a_71759c36",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1649,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-16T19:06:22Z",
      "side": 1,
      "message": "I was thinking about this.\n\nIdeally we\u0027d upgrade to argparse which makes that very easy. However, it may be non-trivial to migrate gclient from optparse to argparse.\n\nWe could also explicitly handle \"-\".\n\nMeanwhile, passing --output-deps /dev/stdout works.",
      "parentUuid": "07bedeb1_dc9a012e",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "03669886_678184f8",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1649,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2017-05-16T19:10:26Z",
      "side": 1,
      "message": "Yeah, workarounds with things like /dev/stdout (although not cross-platform) are why I\u0027m not too worried about it. Supporting \"-\" might be nice, although I\u0027m not sure if there is precedent with gclient or depot_tools in general, so it might be confusing to have it here and not in other places. Not requiring it just seemed like the simplest \"least common denominator\" solution.",
      "parentUuid": "089fe91a_71759c36",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a6a09512_f6ae17f5",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1649,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-17T01:44:46Z",
      "side": 1,
      "message": "I would either make it optional and default to stdout, or add support for \"-\". I don\u0027t have a strong leaning as to which, but I don\u0027t like \"/dev/stdout\" as the alternative as much.",
      "parentUuid": "03669886_678184f8",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1e13b251_7c6df8c6",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1649,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-18T16:23:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a6a09512_f6ae17f5",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e8127dc4_7cc7f7f2",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1675,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-17T01:44:46Z",
      "side": 1,
      "message": "Nit: I think you should add a trailing newline here, else the last line won\u0027t be newline-terminated?",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7584451_268f80fe",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1675,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-18T16:23:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e8127dc4_7cc7f7f2",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7d1eeebb_ca41a5f1",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1680,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-17T01:44:46Z",
      "side": 1,
      "message": "Nit: I probably wouldn\u0027t print anything on success.",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7bcb797a_8793ec68",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1680,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-18T16:23:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7d1eeebb_ca41a5f1",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "89f19dd1_0a829a33",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1698,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-17T01:44:46Z",
      "side": 1,
      "message": "Can you add something that talks about how deps_os and hooks_os are handled?",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c897a4d8_070bba27",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1698,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2017-05-17T03:41:30Z",
      "side": 1,
      "message": "Based on the TODO below, I assumed that handling was still forthcoming.",
      "parentUuid": "89f19dd1_0a829a33",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c378f7ab_c8da6dde",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1698,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-18T16:23:59Z",
      "side": 1,
      "message": "Yup.",
      "parentUuid": "c897a4d8_070bba27",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "215a1b33_154e935e",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1775,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-17T01:44:46Z",
      "side": 1,
      "message": "Do we know if we actually still need to support FromImpl(), or any other non-string URL?\n\nAlso, this function is really doing two things: checking if something is unpinned, and adding the dependency. I\u0027d split it into two functions to make that clearer.",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9cd4530b_15dfc188",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1775,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-18T16:23:59Z",
      "side": 1,
      "message": "\u003e Do we know if we actually still need to support FromImpl(), or any other non-string URL?\n\nThis came up in some of my tests.\n\n\u003e Also, this function is really doing two things: checking if something is unpinned, and adding the dependency. I\u0027d split it into two functions to make that clearer.\n\nDo you have a more specific suggestion? It could be considered part of this function, since the intention is to perform this check any time we add a dep. Splitting off these few lines doesn\u0027t seem that useful, although could be done if you insist.",
      "parentUuid": "215a1b33_154e935e",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "85946810_a08c8170",
        "filename": "gclient.py",
        "patchSetId": 7
      },
      "lineNbr": 1775,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-18T17:47:18Z",
      "side": 1,
      "message": "Did FromImpl come up in (current) real-world usage? I thought it only ever worked correctly for SVN, which we don\u0027t support any more.\n\nI won\u0027t insist on splitting the function up, but I think the code would be clearer if you split handling the unpinned deps out from the pinned deps.",
      "parentUuid": "9cd4530b_15dfc188",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bf8fe922_dcf8c48c",
        "filename": "testing_support/fake_repos.py",
        "patchSetId": 7
      },
      "lineNbr": 479,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-17T01:44:46Z",
      "side": 1,
      "message": "Why add the comment about where the hooks are run from? Inside the test data seems like the wrong place for it ...",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9a9e55d_545fe72b",
        "filename": "testing_support/fake_repos.py",
        "patchSetId": 7
      },
      "lineNbr": 479,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-18T16:23:59Z",
      "side": 1,
      "message": "Ah, this was just copy-pasted from repo_1 above.",
      "parentUuid": "bf8fe922_dcf8c48c",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7633f458_3c54de3e",
        "filename": "tests/gclient_smoketest.py",
        "patchSetId": 7
      },
      "lineNbr": 545,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2017-05-16T19:02:23Z",
      "side": 1,
      "message": "Maybe add a test to make sure it also handles solutions with custom_deps overrides?",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "89da7989_60aca06e",
        "filename": "tests/gclient_smoketest.py",
        "patchSetId": 7
      },
      "lineNbr": 545,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-16T19:06:22Z",
      "side": 1,
      "message": "OK to defer to a future CL?",
      "parentUuid": "7633f458_3c54de3e",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66cfadba_29f58516",
        "filename": "tests/gclient_smoketest.py",
        "patchSetId": 7
      },
      "lineNbr": 545,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2017-05-16T19:10:26Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "89da7989_60aca06e",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b4815553_2a22ea27",
        "filename": "tests/gclient_smoketest.py",
        "patchSetId": 7
      },
      "lineNbr": 554,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-17T01:44:46Z",
      "side": 1,
      "message": "I don\u0027t understand this notation; is it supposed to be the chain of DEPS files that produced this?",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "905d454a_623a1ce0",
        "filename": "tests/gclient_smoketest.py",
        "patchSetId": 7
      },
      "lineNbr": 554,
      "author": {
        "id": 1002740
      },
      "writtenOn": "2017-05-18T16:23:59Z",
      "side": 1,
      "message": "Yes - this is what hierarchy() returns.",
      "parentUuid": "b4815553_2a22ea27",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "293ca311_8f72009a",
        "filename": "tests/gclient_smoketest.py",
        "patchSetId": 7
      },
      "lineNbr": 554,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2017-05-18T17:47:18Z",
      "side": 1,
      "message": "Okay. I still find the notation non-obvious, but I\u0027m not immediately sure what would be clearer.",
      "parentUuid": "905d454a_623a1ce0",
      "revId": "fb3fc117794833fb491d0d420e3e5117e8ea611c",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}