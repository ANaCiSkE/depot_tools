{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ca81d41d_7019d2b9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2021-02-24T08:28:24Z",
      "side": 1,
      "message": "I don\u0027t think this fix is correct. The \u0027b\u0027 mode was used to stop Python from translating \\n characters to \\r\\n on Windows. In Python 3 we can\u0027t use \u0027b\u0027 mode for that anymore, but we still want to stop the translation.\n\nhttps://docs.python.org/release/3.2/library/functions.html#open\n\nI think you need newline\u003d\u0027\\n\u0027 in the open call, but double-check that.\n",
      "revId": "5555db4ea32a92b9aaa1a238134eddec94f54f83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a389721_cfa8ab59",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1143154
      },
      "writtenOn": "2021-02-25T01:37:45Z",
      "side": 1,
      "message": "Some extra context:\nThe intent of this is to fix crashes caused by Python3 giving errors when JSON.dump tries to write a string to a file that was opened in binary mode.\n\nThis means the wrapper would crash when it wrote to the config file, this would truncate the file to size zero. Every subsequent read \u0026 parse of the config file would throw as JSON dislikes zero length inputs (every build).\n\n\nOn line endings:\n+1 if conversion is undesirable.\n\nIn Python3 the default newline mode is \u0027universal\u0027 which will convert between platform and \u0027\\n\u0027 on read/write.\n\nOut of interest: is conversion undesirable for performance or correctness reasons?\n\n`newline\u003d\u0027\\n\u0027` will mean that no conversion takes place.",
      "parentUuid": "ca81d41d_7019d2b9",
      "revId": "5555db4ea32a92b9aaa1a238134eddec94f54f83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "62d81a64_8acafe72",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2021-02-25T02:47:59Z",
      "side": 1,
      "message": "I don\u0027t think it is necessary to have newline there?\nBecause wrapper doesn\u0027t use prettyprint, and ninjalog.cfg doesn\u0027t have newline.",
      "parentUuid": "1a389721_cfa8ab59",
      "revId": "5555db4ea32a92b9aaa1a238134eddec94f54f83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e2b72346_9bbbe7c3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2021-02-25T23:32:14Z",
      "side": 1,
      "message": "ping?",
      "revId": "5555db4ea32a92b9aaa1a238134eddec94f54f83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba65ecad_9b1de5ed",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2021-02-25T23:43:55Z",
      "side": 1,
      "message": "Conversion is undesirable, not for performance or correctness issues per-se, but because the Chromium standard is to use \\n line endings.\n\nThe no-change-to-behavior way to make this code work in Python 3 is to switch from binary to newline\u003d\u0027\\n\u0027 and I think that is what we should do. I think it is the preferred default, although dpranke@ could say for sure if there is some doubt.",
      "parentUuid": "62d81a64_8acafe72",
      "revId": "5555db4ea32a92b9aaa1a238134eddec94f54f83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1dbcfdf5_3a16a1be",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2021-02-26T00:43:03Z",
      "side": 1,
      "message": "I agree to use \u0027\\n\u0027 for source, but having newline\u003d\u0027\\n\u0027 for config file seems not common in chromium?\nhttps://source.chromium.org/search?q\u003dopen%5C(.*newline.*%5C%5Cn%20f:py$\u0026ss\u003dchromium",
      "parentUuid": "ba65ecad_9b1de5ed",
      "revId": "5555db4ea32a92b9aaa1a238134eddec94f54f83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a076f57c_fab0b38c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2021-02-26T03:09:42Z",
      "side": 1,
      "message": "After some discussions with dpranke@ I agree that using newline\u003d\u0027\\n\u0027 is more trouble than it\u0027s worth (it doesn\u0027t work on Python 2) so this lgtm",
      "revId": "5555db4ea32a92b9aaa1a238134eddec94f54f83",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}