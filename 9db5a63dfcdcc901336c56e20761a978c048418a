{
  "comments": [
    {
      "key": {
        "uuid": "8d5d50cf_2ceb7785",
        "filename": "bootstrap/git.template.bat",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1167909
      },
      "writtenOn": "2020-04-01T19:03:13Z",
      "side": 1,
      "message": "Ok, I think this would work\n\n  @echo off\n  setlocal\n  if not defined EDITOR set EDITOR\u003dnotepad\n  set PATH\u003d%~dp0${GIT_BIN_RELDIR}\\cmd;%~dp0;%PATH%\n\n  REM This hack tries to restore as many original arguments as possible\n  REM \"HEAD^^1\" is parsed correctly, but \"HEAD^1\" is still not.\n  REM TODO(crbug.com/1066663): Fix passing \"HEAD^1\" as argument.\n  call :RunGit \"%*\"\n  if %ERRORLEVEL% NEQ 0 (\n    exit /b %ERRORLEVEL%\n  )\n  goto :eof\n\n  :RunGit\n  call \"%~dp0${GIT_BIN_RELDIR}\\${GIT_PROGRAM}\" %~1\n  if %ERRORLEVEL% NEQ 0 (\n    exit /b %ERRORLEVEL%\n  )\n\nWe use /b to exit only the batch script context, and not the prompt, but we have to do it twice, since :RunGit is called as a script.",
      "revId": "9db5a63dfcdcc901336c56e20761a978c048418a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fa2800af_5678b8ff",
        "filename": "bootstrap/git.template.bat",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2020-04-01T19:25:08Z",
      "side": 1,
      "message": "Thanks, that will do it! I wasn\u0027t aware that exit from call won\u0027t be used.",
      "parentUuid": "8d5d50cf_2ceb7785",
      "revId": "9db5a63dfcdcc901336c56e20761a978c048418a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d7588923_febf6848",
        "filename": "bootstrap/git.template.bat",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1167909
      },
      "writtenOn": "2020-03-31T23:30:56Z",
      "side": 1,
      "message": "I don\u0027t think this is possible.\n\"^\" is a special character in batch files that is used to escape other characters, so \"^^\" will always need to be used.",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 63
      },
      "revId": "9db5a63dfcdcc901336c56e20761a978c048418a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3a396a6_293e9458",
        "filename": "bootstrap/git.template.bat",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2020-03-31T23:50:13Z",
      "side": 1,
      "message": "Yes, it doesn\u0027t seem possible with batch. But, maybe it\u0027s possible with powershell script or if we can figure out executable. This means getting rid of this batch file.",
      "parentUuid": "d7588923_febf6848",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 63
      },
      "revId": "9db5a63dfcdcc901336c56e20761a978c048418a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "46333637_564f5ecf",
        "filename": "bootstrap/git.template.bat",
        "patchSetId": 2
      },
      "lineNbr": 8,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2020-04-01T18:20:05Z",
      "side": 1,
      "message": "Let me know if I should reword those the comment.",
      "parentUuid": "e3a396a6_293e9458",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 8,
        "endChar": 63
      },
      "revId": "9db5a63dfcdcc901336c56e20761a978c048418a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "07c47b3a_e802f4ed",
        "filename": "bootstrap/git.template.bat",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1167909
      },
      "writtenOn": "2020-03-31T23:30:56Z",
      "side": 1,
      "message": "Is this needed? It causes git to exit the command line when an error happens.\nIf I remove it, things seem to work fine:\n\n  C:\\src\\client\\webrtc\\src\u003egit rev-parse --verify deadbeeef\n  fatal: Needed a single revision\n\n  C:\\src\\client\\webrtc\\src\u003eecho %ERRORLEVEL%\n  128",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 16,
        "endChar": 1
      },
      "revId": "9db5a63dfcdcc901336c56e20761a978c048418a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "35d2052b_968f991d",
        "filename": "bootstrap/git.template.bat",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2020-03-31T23:50:13Z",
      "side": 1,
      "message": ".\\vpython3 .\\tests\\scm_unittest.py -v RealGitTest.testIsValidRevision\n\nfails if I don\u0027t do exit. Which reminds me one downside of this CL is that if this command is running in cmd.exe (not sure how many developers use that), then such prompt will be closed.  This doesn\u0027t affect powershell nor cygwin.",
      "parentUuid": "07c47b3a_e802f4ed",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 16,
        "endChar": 1
      },
      "revId": "9db5a63dfcdcc901336c56e20761a978c048418a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "86b33d48_78a3efa8",
        "filename": "bootstrap/git.template.bat",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2020-04-01T18:20:05Z",
      "side": 1,
      "message": "Resolving",
      "parentUuid": "35d2052b_968f991d",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 16,
        "endChar": 1
      },
      "revId": "9db5a63dfcdcc901336c56e20761a978c048418a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "490bfe72_3d264022",
        "filename": "bootstrap/git.template.bat",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1167909
      },
      "writtenOn": "2020-04-01T18:43:57Z",
      "side": 1,
      "message": "I don\u0027t think it\u0027s acceptable to close a cmd prompt when git fails. It is very surprising and potentially very disrupting.",
      "parentUuid": "86b33d48_78a3efa8",
      "range": {
        "startLine": 14,
        "startChar": 0,
        "endLine": 16,
        "endChar": 1
      },
      "revId": "9db5a63dfcdcc901336c56e20761a978c048418a",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}