{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a1519880_a23c6c68",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2021-01-15T23:53:57Z",
      "side": 1,
      "message": "Liviu - PTAL. This fixes crbug.com/1167064",
      "revId": "761dd16270eae2fbff101147dd72060d00ee74c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "32e9731a_a55f7689",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2021-01-16T00:10:29Z",
      "side": 1,
      "message": "Yoshisato - can you check whether this version works properly on goma-client-internal-win now, or whatever local testing is equivalent? Specifically whether python.bat/python3.bat are found.\n\nhttps://ci.chromium.org/p/infra-internal/builders/prod/goma-client-internal-win",
      "revId": "761dd16270eae2fbff101147dd72060d00ee74c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6277da06_443026c8",
        "filename": "autoninja.py",
        "patchSetId": 6
      },
      "lineNbr": 114,
      "author": {
        "id": 1200158
      },
      "writtenOn": "2021-01-15T23:55:09Z",
      "side": 1,
      "message": "This sys.path[0] usage still assumes depot_tools is the first entry in the PATH. Wouldn\u0027t it be better to use something based on dirname(__file__) since that\u0027s the path we really want? `os.path.join(os.path.dirname(os.path.abspath(__file__)), \u0027python3.bat\u0027)`",
      "revId": "761dd16270eae2fbff101147dd72060d00ee74c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca11b13c_13b6d821",
        "filename": "autoninja.py",
        "patchSetId": 6
      },
      "lineNbr": 114,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2021-01-16T00:02:10Z",
      "side": 1,
      "message": "My understanding of sys.path is that it is the python path and that the scripts current directory is always the first entry in the sys.path list. I just tested this by running this script with python.bat, python.exe, and python3.bat and it consistently printed the directory of the script:\n\nimport sys\nprint (sys.path[0])\n\nIt did this despite the script being in c:\\src\\temp, which is definitely not anywhere in my PATH environment variable.\n\nI think that the failures to find gomacc.exe were because it wasn\u0027t installed in depot_tools for some reason, not because gomacc_path was wrong. But please let me know if I am missing something.",
      "parentUuid": "6277da06_443026c8",
      "revId": "761dd16270eae2fbff101147dd72060d00ee74c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3725329_d471a79e",
        "filename": "autoninja.py",
        "patchSetId": 6
      },
      "lineNbr": 114,
      "author": {
        "id": 1200158
      },
      "writtenOn": "2021-01-16T00:06:03Z",
      "side": 1,
      "message": "Ah, quite right. I forgot that sys.path is not the system PATH env var. Thanks!",
      "parentUuid": "ca11b13c_13b6d821",
      "revId": "761dd16270eae2fbff101147dd72060d00ee74c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5cf13d24_1f0266a1",
        "filename": "autoninja.py",
        "patchSetId": 6
      },
      "lineNbr": 114,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2021-01-16T00:10:29Z",
      "side": 1,
      "message": "It made me check, and refresh my memory, so it\u0027s all good.",
      "parentUuid": "e3725329_d471a79e",
      "revId": "761dd16270eae2fbff101147dd72060d00ee74c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c7f9a88_1e436ae0",
        "filename": "autoninja.py",
        "patchSetId": 6
      },
      "lineNbr": 114,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2021-01-16T01:53:22Z",
      "side": 1,
      "message": "I believe your understanding of sys.path is correct, but doing things this way is less idiomatic than dirname(__file__), at least as far as Chromium code is concerned.\n\nSo, I\u0027d still recommend you follow Doug\u0027s suggestion even if yours works.",
      "parentUuid": "5cf13d24_1f0266a1",
      "revId": "761dd16270eae2fbff101147dd72060d00ee74c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d284d8ad_236e77e8",
        "filename": "autoninja.py",
        "patchSetId": 6
      },
      "lineNbr": 114,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2021-01-16T02:03:17Z",
      "side": 1,
      "message": "Understood. Done.\n\nIn Chromium it looks like the majority of places don\u0027t use os.path.abspath for this so I went with that, but there is some inconsistency so let me know if I\u0027m not using the preferred form.",
      "parentUuid": "1c7f9a88_1e436ae0",
      "revId": "761dd16270eae2fbff101147dd72060d00ee74c5",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}