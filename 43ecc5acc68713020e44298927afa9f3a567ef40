{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "a51ebbe0_5a7fee75",
        "filename": "git_cl.py",
        "patchSetId": 1
      },
      "lineNbr": 2640,
      "author": {
        "id": 1237795
      },
      "writtenOn": "2023-01-23T20:05:03Z",
      "side": 1,
      "message": "rather than adding another flag, i think we can accomplish the same thing by checking options.squash\n\ngranted this won\u0027t solve the the \"initial upload for squashed CLs\" part, but I\u0027m assuming that\u0027s less important.",
      "range": {
        "startLine": 2640,
        "startChar": 35,
        "endLine": 2640,
        "endChar": 59
      },
      "revId": "43ecc5acc68713020e44298927afa9f3a567ef40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b854b07f_133612b5",
        "filename": "git_cl.py",
        "patchSetId": 1
      },
      "lineNbr": 2640,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2023-01-23T21:38:28Z",
      "side": 1,
      "message": "It\u0027s not clear to me how just checking options.squash would work?",
      "parentUuid": "a51ebbe0_5a7fee75",
      "range": {
        "startLine": 2640,
        "startChar": 35,
        "endLine": 2640,
        "endChar": 59
      },
      "revId": "43ecc5acc68713020e44298927afa9f3a567ef40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "245a48df_4d7e06d6",
        "filename": "git_cl.py",
        "patchSetId": 1
      },
      "lineNbr": 2640,
      "author": {
        "id": 1237795
      },
      "writtenOn": "2023-01-23T22:50:40Z",
      "side": 1,
      "message": "```\nif not self.GetIssue() or not options.squash:\n  # don\u0027t add the hashtags from the description\n```\n\nSo just disable hashtags auto-added from descriptions all together when we\u0027re in no-squash mode. But I may be missing something.",
      "parentUuid": "b854b07f_133612b5",
      "range": {
        "startLine": 2640,
        "startChar": 35,
        "endLine": 2640,
        "endChar": 59
      },
      "revId": "43ecc5acc68713020e44298927afa9f3a567ef40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0822767_110df86c",
        "filename": "git_cl.py",
        "patchSetId": 1
      },
      "lineNbr": 2640,
      "author": {
        "id": 1394418
      },
      "writtenOn": "2023-01-24T00:17:19Z",
      "side": 1,
      "message": "I believe there are three cases here. For the status quo (before this CL):\n\n- Squash mode (the de-facto workflow)\n  - Initial upload adds change desc hashtags.\n  - Further uploads does not add change desc hashtags.\n- No-squash mode without branch, with detached HEAD (similar to the internal Mercurial workflow)\n  - All uploads add change desc hashtags from the current commit to all CLs in the upload.\n- No-squash mode with branch\n  - I don\u0027t know, but I suspect this is identical to no-squash mode without a branch, as (from my understanding) `GetIssue()` returns None in no-squash mode.\n\nWith this CL, no-squash users can opt to use `--bypass-hashtags` to avoid adding hashtags after the initial upload.\n\nIf we always choose not to add change desc hashtags when using no-squash, then the hashtags will never be added. For example, this CL wouldn\u0027t have `git-cl` if that was the case. This is minor functionality (subsequent uploads for no-squash users do not add hashtags) for an extra flag, so if you are opposed to this I\u0027m happy to change this to use `options.squash` instead of `options.bypass_hashtags`. `--no-squash` users would need to manually add hashtags in that case.\n\nFWIW, we have a similar issue for watchlists, so my personal workflow is to use `git cl upload --no-squash HEAD^` for initial uploads, and `git cl upload --no-squash HEAD^ --bypass-watchlists --bypass-hashtags --bypass-hooks` for subsequent uploads (after running `git cl presubmit -u -f HEAD^` for each commit to be uploaded).",
      "parentUuid": "245a48df_4d7e06d6",
      "range": {
        "startLine": 2640,
        "startChar": 35,
        "endLine": 2640,
        "endChar": 59
      },
      "revId": "43ecc5acc68713020e44298927afa9f3a567ef40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe50aad2_e3ced1b7",
        "filename": "git_cl.py",
        "patchSetId": 1
      },
      "lineNbr": 2640,
      "author": {
        "id": 1237795
      },
      "writtenOn": "2023-01-24T00:42:55Z",
      "side": 1,
      "message": "```\nIf we always choose not to add change desc hashtags when using no-squash, then the hashtags will never be added. \n```\niiuc, hashtags from options.hashtags will still be applied. \nand, i assumed the hashtag from the change_desc was not that important given:\n-  there\u0027s the options.hashtags alternative, \n-  change_desc hashtags isn\u0027t even \u0027fully implemented\u0027 in that, changing the description later doesn\u0027t change the hashtags that get applied.\n\nbut please lmk if your experience does not match this as a user. \n\nto simplify code, very ideally, for any workflow the only hashtags that get applied would be the options.hashtags and it would be applied to all changes that get uploaded with the single git push. We\u0027re not there yet, but at the very least it\u0027d be nice to avoid moving away from that direction and keep things simple.",
      "parentUuid": "e0822767_110df86c",
      "range": {
        "startLine": 2640,
        "startChar": 35,
        "endLine": 2640,
        "endChar": 59
      },
      "revId": "43ecc5acc68713020e44298927afa9f3a567ef40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "752394e0_e19a92f9",
        "filename": "git_cl.py",
        "patchSetId": 1
      },
      "lineNbr": 2640,
      "author": {
        "id": 1394418
      },
      "writtenOn": "2023-01-24T04:16:10Z",
      "side": 1,
      "message": "\u003e i assumed the hashtag from the change_desc was not that important\n\nWe have this in `git cl upload --help`:\n\n```\nIf subject contains text in square brackets or has \"\u003ctext\u003e: \" prefix, such\ntext(s) is treated as Gerrit hashtags. For example, CLs with subjects:\n  [git-cl] add support for hashtags\n  Foo bar: implement foo\nwill be hashtagged with \"git-cl\" and \"foo-bar\" respectively.\n```\n\nso this functionality of `git cl upload` was probably intentional.\n\nThis functionality is also referenced in https://chromium.googlesource.com/chromium/src/+/HEAD/docs/commit_checklist.md#13_upload-the-cl-to-gerrit, and judging by a random selection of CLs from https://chromium-review.googlesource.com/q/status:open+-is:wip, most CLs seem to have a \"hashtag\" in the title.",
      "parentUuid": "fe50aad2_e3ced1b7",
      "range": {
        "startLine": 2640,
        "startChar": 35,
        "endLine": 2640,
        "endChar": 59
      },
      "revId": "43ecc5acc68713020e44298927afa9f3a567ef40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e5860fdc_424e36cc",
        "filename": "git_cl.py",
        "patchSetId": 1
      },
      "lineNbr": 2640,
      "author": {
        "id": 1237795
      },
      "writtenOn": "2023-01-24T05:18:50Z",
      "side": 1,
      "message": "I understand it was intentional when it was added. But that doesn\u0027t mean it\u0027s valuable.\nCould you help us understand the impact of not having hashtags from change descriptions and only having `options.hashtags`?",
      "parentUuid": "752394e0_e19a92f9",
      "range": {
        "startLine": 2640,
        "startChar": 35,
        "endLine": 2640,
        "endChar": 59
      },
      "revId": "43ecc5acc68713020e44298927afa9f3a567ef40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c16e536_c6970e5e",
        "filename": "git_cl.py",
        "patchSetId": 1
      },
      "lineNbr": 2640,
      "author": {
        "id": 1394418
      },
      "writtenOn": "2023-01-24T05:55:36Z",
      "side": 1,
      "message": "Users would need to add hashtags manually.\n\nMy main concern was breaking existing functionality, but if the depot_tools team agrees to remove automatic hashtags I\u0027m personally not too fussed about it. I personally use hashtags for Perf/GRAD to have a link showing all my CLs relating to a feature - adding hashtags manually would be a bit tedious but should be OK.",
      "parentUuid": "e5860fdc_424e36cc",
      "range": {
        "startLine": 2640,
        "startChar": 35,
        "endLine": 2640,
        "endChar": 59
      },
      "revId": "43ecc5acc68713020e44298927afa9f3a567ef40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3d198945_231ab7f9",
        "filename": "git_cl.py",
        "patchSetId": 1
      },
      "lineNbr": 2640,
      "author": {
        "id": 1237795
      },
      "writtenOn": "2023-01-24T15:52:52Z",
      "side": 1,
      "message": "Thanks! that\u0027s useful to know.\nWe\u0027re about to re-shuffle some of this code with another project.\nI don\u0027t want to have another `bypass_hashtags` flag added, but also don\u0027t want to take away this feature too hastily.\nAssuming this is also P3 like the bug. Do you mind if the team takes over addressing these issues?",
      "parentUuid": "2c16e536_c6970e5e",
      "range": {
        "startLine": 2640,
        "startChar": 35,
        "endLine": 2640,
        "endChar": 59
      },
      "revId": "43ecc5acc68713020e44298927afa9f3a567ef40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f541c58c_fd685e62",
        "filename": "git_cl.py",
        "patchSetId": 1
      },
      "lineNbr": 2640,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2023-01-24T22:05:14Z",
      "side": 1,
      "message": "Joanna, to clarify, do you want Michael to abandon this CL and wait for you to have a replacement?",
      "parentUuid": "3d198945_231ab7f9",
      "range": {
        "startLine": 2640,
        "startChar": 35,
        "endLine": 2640,
        "endChar": 59
      },
      "revId": "43ecc5acc68713020e44298927afa9f3a567ef40",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}