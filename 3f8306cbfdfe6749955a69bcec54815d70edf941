{
  "comments": [
    {
      "key": {
        "uuid": "85f6f296_d70467e7",
        "filename": "presubmit_support.py",
        "patchSetId": 8
      },
      "lineNbr": 1536,
      "author": {
        "id": 1167909
      },
      "writtenOn": "2020-07-28T21:58:47Z",
      "side": 1,
      "message": "I just noticed, the value of rel_path is relative to the current directory (i.e. main_path), where it should be relative to the repository root.",
      "range": {
        "startLine": 1536,
        "startChar": 4,
        "endLine": 1536,
        "endChar": 12
      },
      "revId": "3f8306cbfdfe6749955a69bcec54815d70edf941",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b9867da8_788ea18f",
        "filename": "presubmit_support.py",
        "patchSetId": 8
      },
      "lineNbr": 1536,
      "author": {
        "id": 1425388
      },
      "writtenOn": "2020-07-28T23:40:44Z",
      "side": 1,
      "message": "Isn\u0027t presubmit_support always going to be run from repository root? if not, how would I get path relative to repository root? We do os.chdir(main_path) to change back to main path at the end of this method.",
      "parentUuid": "85f6f296_d70467e7",
      "range": {
        "startLine": 1536,
        "startChar": 4,
        "endLine": 1536,
        "endChar": 12
      },
      "revId": "3f8306cbfdfe6749955a69bcec54815d70edf941",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa5a6372_5869b7ac",
        "filename": "presubmit_support.py",
        "patchSetId": 8
      },
      "lineNbr": 1536,
      "author": {
        "id": 1167909
      },
      "writtenOn": "2020-07-28T23:55:05Z",
      "side": 1,
      "message": "No, a developer could run `git-cl presubmit` from anywhere within the repo.\n\n  # Change to the presubmit file\u0027s directory to support local imports.\n  main_path \u003d os.getcwd()\n  presubmit_dir \u003d os.path.dirname(presubmit_path)\n  os.chdir(presubmit_dir)\n  # Get path of presubmit directory relative to repository root.\n  # Always use forward slashes, so that path is same in *nix and Windows.\n  rel_path \u003d os.path.relpath(presubmit_dir, input_api.change.RepositoryRoot())\n  rel_path \u003d rel_path.replace(os.path.sep, \u0027/\u0027)\n\nAlso, do this in a separate CL, as this is a bug with the current code.",
      "parentUuid": "b9867da8_788ea18f",
      "range": {
        "startLine": 1536,
        "startChar": 4,
        "endLine": 1536,
        "endChar": 12
      },
      "revId": "3f8306cbfdfe6749955a69bcec54815d70edf941",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f99248c1_a6e0c182",
        "filename": "presubmit_support.py",
        "patchSetId": 8
      },
      "lineNbr": 1560,
      "author": {
        "id": 1167909
      },
      "writtenOn": "2020-07-28T21:58:47Z",
      "side": 1,
      "message": "Use single quotes.\nAlso, consider splitting\n\n  if not function_name.startswith(\u0027Check\u0027):\n    continue\n  if function_name.endswith(\u0027Commit\u0027) and not self.committing:\n    continue\n  if function_name.endswith(\u0027Upload\u0027) and self.committing:\n    continue",
      "range": {
        "startLine": 1560,
        "startChar": 74,
        "endLine": 1560,
        "endChar": 76
      },
      "revId": "3f8306cbfdfe6749955a69bcec54815d70edf941",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aa662554_9b9b9e77",
        "filename": "presubmit_support.py",
        "patchSetId": 8
      },
      "lineNbr": 1560,
      "author": {
        "id": 1425388
      },
      "writtenOn": "2020-07-28T23:40:44Z",
      "side": 1,
      "message": "fixed",
      "parentUuid": "f99248c1_a6e0c182",
      "range": {
        "startLine": 1560,
        "startChar": 74,
        "endLine": 1560,
        "endChar": 76
      },
      "revId": "3f8306cbfdfe6749955a69bcec54815d70edf941",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28615086_5b99b9dc",
        "filename": "presubmit_support.py",
        "patchSetId": 8
      },
      "lineNbr": 1569,
      "author": {
        "id": 1167909
      },
      "writtenOn": "2020-07-28T21:58:47Z",
      "side": 1,
      "message": "list is not needed.",
      "range": {
        "startLine": 1569,
        "startChar": 25,
        "endLine": 1569,
        "endChar": 29
      },
      "revId": "3f8306cbfdfe6749955a69bcec54815d70edf941",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6a409cb9_3275a98e",
        "filename": "presubmit_support.py",
        "patchSetId": 8
      },
      "lineNbr": 1569,
      "author": {
        "id": 1425388
      },
      "writtenOn": "2020-07-28T23:40:44Z",
      "side": 1,
      "message": "if tuple is immutable how would we change it? That\u0027s why my approach was to have a list and keep extending it.",
      "parentUuid": "28615086_5b99b9dc",
      "range": {
        "startLine": 1569,
        "startChar": 25,
        "endLine": 1569,
        "endChar": 29
      },
      "revId": "3f8306cbfdfe6749955a69bcec54815d70edf941",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "72be0b85_837820e5",
        "filename": "presubmit_support.py",
        "patchSetId": 8
      },
      "lineNbr": 1580,
      "author": {
        "id": 1167909
      },
      "writtenOn": "2020-07-28T21:58:47Z",
      "side": 1,
      "message": "Why is tuple needed?",
      "range": {
        "startLine": 1580,
        "startChar": 0,
        "endLine": 1580,
        "endChar": 0
      },
      "revId": "3f8306cbfdfe6749955a69bcec54815d70edf941",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "60148ac7_dcac69ee",
        "filename": "presubmit_support.py",
        "patchSetId": 8
      },
      "lineNbr": 1580,
      "author": {
        "id": 1425388
      },
      "writtenOn": "2020-07-28T23:40:44Z",
      "side": 1,
      "message": "presubmit_unittest expect a tuple output, so I cast it into tuple at the end",
      "parentUuid": "72be0b85_837820e5",
      "range": {
        "startLine": 1580,
        "startChar": 0,
        "endLine": 1580,
        "endChar": 0
      },
      "revId": "3f8306cbfdfe6749955a69bcec54815d70edf941",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}