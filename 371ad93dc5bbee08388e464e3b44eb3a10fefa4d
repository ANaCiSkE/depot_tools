{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b402d39c_ce3a0c61",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2023-04-14T17:13:05Z",
      "side": 1,
      "message": "Is 10 seconds enough, we have some really complex automated queries for changes (in pupr for instance).",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b21c17a_9a63d2d9",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2023-04-14T17:18:24Z",
      "side": 1,
      "message": "I\u0027m not sure how to define \"really complex\" for gerrit though, would be nice to know the typical response times. This 10 sec is before retries right? So even if we exceed we\u0027ll get more attempts?",
      "parentUuid": "b402d39c_ce3a0c61",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b7c27ab_5eba6006",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1170419
      },
      "writtenOn": "2023-04-14T17:22:15Z",
      "side": 1,
      "message": "\u003e This 10 sec is before retries right? So even if we exceed we\u0027ll get more attempts?\n\nCorrect. By default it\u0027ll try 4 more times.\n\nOn chrome\u0027s bots, the p99 for our runs of this query was under 1s. Then again, our queries are very simple. (I think they\u0027re mostly just \"get this one change by issue num\"). Can you pull up an example build with a more involved get-changes call? Can bump this above whatever its usual runtime is.",
      "parentUuid": "9b21c17a_9a63d2d9",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d76c972c_2d53dac2",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2023-04-14T17:31:46Z",
      "side": 1,
      "message": "This pupr run is \u003e8 seconds asking for branch and topic:\n\nhttps://screenshot.googleplex.com/7cpNvTmBguYk6qT\n\nA little close for comfort...",
      "parentUuid": "1b7c27ab_5eba6006",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8676dad7_3cd452d5",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1170419
      },
      "writtenOn": "2023-04-14T17:37:41Z",
      "side": 1,
      "message": "How do we feel about a 30s timeout then? I could be talked up to 60s, even.\n\nI\u0027ll need to do some maths to figure out what this new step timeout val should be:\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/depot_tools/recipes/recipe_modules/tryserver/api.py;drc\u003d9519fc130068cc19ff38489a069436a88e8516ec;l\u003d143",
      "parentUuid": "d76c972c_2d53dac2",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34936662_e15fd14c",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1355298
      },
      "writtenOn": "2023-04-14T17:38:29Z",
      "side": 1,
      "message": "My currently completely dataless opinion is that 30 seconds \"should be enough\".",
      "parentUuid": "8676dad7_3cd452d5",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6662b601_1b26428c",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1170419
      },
      "writtenOn": "2023-04-14T17:45:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "34936662_e15fd14c",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a41528b_a0ceb650",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1516607
      },
      "writtenOn": "2023-04-14T18:25:19Z",
      "side": 1,
      "message": "I poked around in the data a bit and found that 30 seconds covers us for the vast majority of cases (up to 90%ile) http://screen/8YUWicPU32oVKmE\n\nHowever, we have some long tail calls that can take several minutes, e.g. 3.5 minutes is the longest we\u0027ve seen in the last 90 days - http://screen/BoFCmztufaWgxhm",
      "parentUuid": "34936662_e15fd14c",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "723c7e14_27507727",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1170419
      },
      "writtenOn": "2023-04-14T18:49:42Z",
      "side": 1,
      "message": "Thanks for checking that! If I were to guess, I\u0027d say that those massive long tails are just a gerrit fluke/flake? In fact, if it had timed out after 30s, slept for 10s, then retried, there\u0027s a good chance that the 2nd attempt would\u0027ve finished in the usual ~1s range.\n\nSo this might actually help reduce those times if I\u0027m right. But if I\u0027m wrong, then yeah those long tails would end up consistently failing. WDWT?",
      "parentUuid": "1a41528b_a0ceb650",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57a7cbbf_55eb7e3f",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1516607
      },
      "writtenOn": "2023-04-14T21:09:31Z",
      "side": 1,
      "message": "IMO let\u0027s give 30s a shot and I\u0027ll let our oncaller know about this change so if they start seeing failures to get gerrit changes we can revisit.",
      "parentUuid": "723c7e14_27507727",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "45441394_3de6433e",
        "filename": "gerrit_util.py",
        "patchSetId": 3
      },
      "lineNbr": 559,
      "author": {
        "id": 1170419
      },
      "writtenOn": "2023-04-14T21:50:06Z",
      "side": 1,
      "message": "SG ðŸ¤ž",
      "parentUuid": "57a7cbbf_55eb7e3f",
      "range": {
        "startLine": 559,
        "startChar": 65,
        "endLine": 559,
        "endChar": 69
      },
      "revId": "371ad93dc5bbee08388e464e3b44eb3a10fefa4d",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}