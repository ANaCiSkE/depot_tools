{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f40a9b3f_f22aa206",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1367998
      },
      "writtenOn": "2021-04-24T01:23:49Z",
      "side": 1,
      "message": "run without change:\nhttps://luci-milo.appspot.com/ui/p/infra/builders/try/Gerrit%20Plugins%20Presubmit/b8849212615338680400/overview\n\nled run with change:\nhttps://luci-milo.appspot.com/raw/build/logs.chromium.org/infra/led/gavinmak_google.com/5c6660b1f57cc8ff456277617b2edb46779c7629959c4cdfda367f8c1ecf26ed/+/build.proto",
      "revId": "c9dffc9924f2eb75f18ccc2b5fe62f7c83ad2c5e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "10f84732_31b9cfe4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2021-04-26T20:14:50Z",
      "side": 1,
      "message": "I wonder if changes in gclient.* are actually needed. I don\u0027t see how gerrit plugins can be any special than the rest of codebase.\n\nDo you have a run with led, but only with changes in recipes/*? The first fails as there\u0027s no gerrit_plugins configuration",
      "parentUuid": "f40a9b3f_f22aa206",
      "revId": "c9dffc9924f2eb75f18ccc2b5fe62f7c83ad2c5e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2147ac7b_fc3dc918",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1367998
      },
      "writtenOn": "2021-04-26T20:30:46Z",
      "side": 1,
      "message": "Here\u0027s one without changes in gclient/gclient_utils: https://luci-milo.appspot.com/raw/build/logs.chromium.org/infra/led/gavinmak_google.com/d5fb5ca82cfb49a67a31af7b885c511dc874ac984bbfeb58d47e3229788df337/+/build.proto\n\nThe issue is that in gclient, the patch_ref for the change in question needs to be applied otherwise bot_update fails. Somewhere along the way, the URL\n```\nhttps://chromium-review.googlesource.com/infra/gerrit-plugins/tricium.git\n```\nset in gclient/config.py becomes \n```\nhttps://chromium-review.googlesource.com/infra%2Fgerrit-plugins%2Ftricium.git\n```\ninside patch_refs here[1]. At this line, URL1 is used to look inside patch_refs but only URL2 is present, leading bot_update to fail with a \"patch_refs not applied\" error.\n\nI know that the --patch_ref URL passed in to bot_update is encoded, but I haven\u0027t been able to find where this step occurs.\n\n[1]https://source.chromium.org/chromium/chromium/src/+/master:third_party/depot_tools/gclient.py;l\u003d929;drc\u003df6b414c57847249036ae4e6ea15d8ffe37e14cbe",
      "parentUuid": "10f84732_31b9cfe4",
      "revId": "c9dffc9924f2eb75f18ccc2b5fe62f7c83ad2c5e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cc240b74_cf6be3be",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2021-04-26T20:42:56Z",
      "side": 1,
      "message": "Could it be from CLI params that are passed (ie led run ...)?\n\nhttps://logs.chromium.org/logs/infra/led/gavinmak_google.com/d5fb5ca82cfb49a67a31af7b885c511dc874ac984bbfeb58d47e3229788df337/+/u/setup_build/run_recipe\n\nhas \n\n            \"project\": \"infra%2Fgerrit-plugins%2Ftricium\", \n\nIt should really be infra/gerrit-plugins/tricium\n\nIf you check depot_tools presubmit, it\u0027s not escaped",
      "parentUuid": "2147ac7b_fc3dc918",
      "revId": "c9dffc9924f2eb75f18ccc2b5fe62f7c83ad2c5e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2215267e_e5b94fc9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1367998
      },
      "writtenOn": "2021-04-26T21:48:22Z",
      "side": 1,
      "message": "It wouldn\u0027t be from the CLI I think, since this is what I ran\n```\nled get-build 8849212615338680400 | led edit-recipe-bundle -O depot_tools\u003d/path/to/depot_tools | led launch\n```",
      "parentUuid": "cc240b74_cf6be3be",
      "revId": "c9dffc9924f2eb75f18ccc2b5fe62f7c83ad2c5e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "86be7680_cb5c032f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1393469
      },
      "writtenOn": "2021-04-27T03:18:07Z",
      "side": 1,
      "message": "I retrigger try job and it has correct project name this time:\n\nhttps://logs.chromium.org/logs/infra/buildbucket/cr-buildbucket.appspot.com/8848831941568098544/+/u/setup_build/run_recipe\n\nI don\u0027t know what caused it to be escaped in your attempt. Perhaps a bad LUCI deploy? Could you try led test without gclient change on build 8848831941568098544?",
      "parentUuid": "2215267e_e5b94fc9",
      "revId": "c9dffc9924f2eb75f18ccc2b5fe62f7c83ad2c5e",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}