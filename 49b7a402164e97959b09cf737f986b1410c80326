{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "7ca40945_c08f484c",
        "filename": "post_build_ninja_summary.py",
        "patchSetId": 5
      },
      "lineNbr": 341,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2023-10-17T05:13:58Z",
      "side": 1,
      "message": "Better to follow http://go/tott/685?",
      "range": {
        "startLine": 341,
        "startChar": 27,
        "endLine": 341,
        "endChar": 42
      },
      "revId": "49b7a402164e97959b09cf737f986b1410c80326",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e2136d5_a19172a1",
        "filename": "post_build_ninja_summary.py",
        "patchSetId": 5
      },
      "lineNbr": 341,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2023-10-17T05:33:15Z",
      "side": 1,
      "message": "What I want is `--use_siso_metrics` default to True, but sometime False.  \n(That\u0027s why the dest is `use_siso_metrics`) \n\nIs there a good way to do this without using negative name?",
      "parentUuid": "7ca40945_c08f484c",
      "range": {
        "startLine": 341,
        "startChar": 27,
        "endLine": 341,
        "endChar": 42
      },
      "revId": "49b7a402164e97959b09cf737f986b1410c80326",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f2a77054_08f47d69",
        "filename": "post_build_ninja_summary.py",
        "patchSetId": 5
      },
      "lineNbr": 341,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2023-10-17T05:44:56Z",
      "side": 1,
      "message": "Why not use something like `use_ninja_log`?",
      "parentUuid": "5e2136d5_a19172a1",
      "range": {
        "startLine": 341,
        "startChar": 27,
        "endLine": 341,
        "endChar": 42
      },
      "revId": "49b7a402164e97959b09cf737f986b1410c80326",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "770d2498_b6361691",
        "filename": "post_build_ninja_summary.py",
        "patchSetId": 5
      },
      "lineNbr": 341,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2023-10-17T06:01:48Z",
      "side": 1,
      "message": "`use_ninja_log` would be default to False, which is confusing. Ninja builds produce .ninja_log only and use it regardless of `use_ninja_log` flag.",
      "parentUuid": "f2a77054_08f47d69",
      "range": {
        "startLine": 341,
        "startChar": 27,
        "endLine": 341,
        "endChar": 42
      },
      "revId": "49b7a402164e97959b09cf737f986b1410c80326",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b64d8255_4afb5056",
        "filename": "post_build_ninja_summary.py",
        "patchSetId": 5
      },
      "lineNbr": 341,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2023-10-17T06:14:11Z",
      "side": 1,
      "message": "I think that is not so confusing if help contains explanation for that?",
      "parentUuid": "770d2498_b6361691",
      "range": {
        "startLine": 341,
        "startChar": 27,
        "endLine": 341,
        "endChar": 42
      },
      "revId": "49b7a402164e97959b09cf737f986b1410c80326",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cdbf5b88_35393bf6",
        "filename": "post_build_ninja_summary.py",
        "patchSetId": 5
      },
      "lineNbr": 341,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2023-10-17T15:40:37Z",
      "side": 1,
      "message": "I\u0027m not clear on why this flag is needed. Is the idea that our builds are now generating two types of metrics and we need to select which one to create our build summary from? Why can\u0027t the tool just select whichever one works?\n\nThat is, if the .ninja_log version works let\u0027s just use it always. If it doesn\u0027t, let\u0027s never use it. If it kinda sorta works then it seems like we\u0027re going to have a lot of confusion and we need to discuss the tradeoffs and limitations.\n\nIt sounds like this is needed to handle the case where post_build_ninja_summary.py is invoked both explicitly by users and implicitly by the build. Potentially this behavior is going to mean that those two invocations give different results (well, in one case the siso results will be seen instead and those will be different). That seems bad. And also, it doesn\u0027t seem to make sense for autoninja to invoke this script when it knows it will do nothing, does it? Why not just skip invoking it?",
      "parentUuid": "b64d8255_4afb5056",
      "range": {
        "startLine": 341,
        "startChar": 27,
        "endLine": 341,
        "endChar": 42
      },
      "revId": "49b7a402164e97959b09cf737f986b1410c80326",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6911b3a9_92ecacb1",
        "filename": "post_build_ninja_summary.py",
        "patchSetId": 5
      },
      "lineNbr": 341,
      "author": {
        "id": 1560543
      },
      "writtenOn": "2023-10-17T17:05:31Z",
      "side": 1,
      "message": "Drive by review. For the flag specifically, you could use:\n\n```\nparser.add_argument(\u0027--siso-metrics\u0027, default\u003dTrue, action\u003dargparse.BooleanOptionalAction)\n```\n\nthat will expand to `--no-siso-metrics` too, which will set `args.siso_metrics` to `False`.\n\nBut +1 to Bruce\u0027s point - if the tool can derive this from other inputs, then we shouldn\u0027t need to ask for it.",
      "parentUuid": "cdbf5b88_35393bf6",
      "range": {
        "startLine": 341,
        "startChar": 27,
        "endLine": 341,
        "endChar": 42
      },
      "revId": "49b7a402164e97959b09cf737f986b1410c80326",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bec38edf_00c56c81",
        "filename": "post_build_ninja_summary.py",
        "patchSetId": 5
      },
      "lineNbr": 341,
      "author": {
        "id": 1366072
      },
      "writtenOn": "2023-10-18T06:39:39Z",
      "side": 1,
      "message": "\u003e Is the idea that our builds are now generating two types of metrics and we need to select which one to create our build summary from? \n\nYes, Siso generates both siso_metrics.json and .ninja_log from the next version. \n\n\u003e Why can\u0027t the tool just select whichever one works?\n\nThe two summaries are different at this point. and it\u0027s not clear which one is trustworthy, yet. I also think that we should remove this flag soon and only stick with either one.\n\n\u003e argparse.BooleanOptionalAction\n\nYeah, I wanted to use it. But it\u0027s available from Python 3.9 while depot_tools bundles Python 3.8.10+chromium.26.",
      "parentUuid": "6911b3a9_92ecacb1",
      "range": {
        "startLine": 341,
        "startChar": 27,
        "endLine": 341,
        "endChar": 42
      },
      "revId": "49b7a402164e97959b09cf737f986b1410c80326",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}