{
  "comments": [
    {
      "key": {
        "uuid": "c9f9607f_5eff2f39",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2018-08-08T18:57:10Z",
      "side": 1,
      "message": "It looks like for this to work it\u0027ll require goma_dir to be set in args.gn, and I don\u0027t think most devs have that set. Can we default to $HOME/goma if it isn\u0027t set?",
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "86bb70a3_8d3615f9",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2018-08-08T21:59:44Z",
      "side": 1,
      "message": "And on Windows the default is C:\\src\\goma\\goma-win64 - the script needs to know about that default.",
      "parentUuid": "c9f9607f_5eff2f39",
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb0b5c07_a347e174",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1001939
      },
      "writtenOn": "2018-08-09T01:38:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "86bb70a3_8d3615f9",
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a0854acc_ecb1be0c",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1001939
      },
      "writtenOn": "2018-08-09T01:44:38Z",
      "side": 1,
      "message": "better to use \u0027gn arg . --list --json\u0027 ?",
      "parentUuid": "cb0b5c07_a347e174",
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7db85fe6_920c1c67",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 72,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2018-08-08T21:59:44Z",
      "side": 1,
      "message": "On Windows you cant execute goma_ctl directly, you need to execute \"python goma_ctl\"",
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "982834b9_61b1b8e6",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 72,
      "author": {
        "id": 1001939
      },
      "writtenOn": "2018-08-09T01:38:28Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7db85fe6_920c1c67",
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "77b0503d_a0b74338",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2018-08-08T05:09:01Z",
      "side": 1,
      "message": "This is noisy when it shows\n\"goma is always running\"?",
      "range": {
        "startLine": 73,
        "startChar": 24,
        "endLine": 73,
        "endChar": 42
      },
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0c4d5f9_26a5ddfa",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1001939
      },
      "writtenOn": "2018-08-08T07:19:27Z",
      "side": 1,
      "message": "hmm, but suppressing (or buffered output) would not be nice when something went wrong?",
      "parentUuid": "77b0503d_a0b74338",
      "range": {
        "startLine": 73,
        "startChar": 24,
        "endLine": 73,
        "endChar": 42
      },
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "825f6d43_1bffb27f",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1161379
      },
      "writtenOn": "2018-08-08T07:50:46Z",
      "side": 1,
      "message": "I think it is sufficient to show output only when ensure_start exited with non-zero status",
      "parentUuid": "a0c4d5f9_26a5ddfa",
      "range": {
        "startLine": 73,
        "startChar": 24,
        "endLine": 73,
        "endChar": 42
      },
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3bdd1b27_d2ad6ab7",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1003232
      },
      "writtenOn": "2018-08-08T18:57:10Z",
      "side": 1,
      "message": "I would be fine with only on non-zero status, but I might actually prefer it if it was non-zero status *or* when we actually started goma. Though, in the latter case, I\u0027d probably want to limit it to 1-2 lines of output (\u0027starting goma ... started\\n\u0027 or something like that) rather than the full output of goma_ctl start",
      "parentUuid": "825f6d43_1bffb27f",
      "range": {
        "startLine": 73,
        "startChar": 24,
        "endLine": 73,
        "endChar": 42
      },
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "26a03aaf_77fa6021",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1128439
      },
      "writtenOn": "2018-08-08T21:59:44Z",
      "side": 1,
      "message": "I think Dirk\u0027s suggestion is best. There should be output on error, it would be good/reassuring to have output when it actually starts goma, but otherwise it should be silent.\n\nIt also needs to be very fast - how long is the delay to start goma, especially in the case where it is already running?",
      "parentUuid": "3bdd1b27_d2ad6ab7",
      "range": {
        "startLine": 73,
        "startChar": 24,
        "endLine": 73,
        "endChar": 42
      },
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2d922f8_99b1288e",
        "filename": "autoninja.py",
        "patchSetId": 1
      },
      "lineNbr": 73,
      "author": {
        "id": 1001939
      },
      "writtenOn": "2018-08-09T01:38:28Z",
      "side": 1,
      "message": "ok, but I worry that when goma takes long time to start (when upgrade to new version, uploading crash reports, etc), it looks like hang up without no progress outputs. hard to know what is happening.\n\nusually, it should not take long time. happy case would be less than a second.\n\nnote that: when goma is already running, goma_ctl.py ensure_start will print (3 lines + 2 blank lines)\n using /run/user/xxxx/goma_xxx as tmpdir\n GOMA version xxxxx\n\n goma is already running\n\nand not running,  (6 lines + 2 blank lines)\n using /run/user/xxxx/goma_xxx as tmpdir\n GOMA version xxxxx\n \u003cpid\u003e\n waiting for compiler_proxy...\n compiler proxy (pid\u003d\u003cpid\u003e) status: http://127.0.0.1:8088 ok\n\n Now goma is ready!\n\n goma is already running",
      "parentUuid": "26a03aaf_77fa6021",
      "range": {
        "startLine": 73,
        "startChar": 24,
        "endLine": 73,
        "endChar": 42
      },
      "revId": "05263e085ff9f32f4502c9e924b7da94320c10c9",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    }
  ]
}