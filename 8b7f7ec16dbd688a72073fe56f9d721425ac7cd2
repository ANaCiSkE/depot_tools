{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "dd97dd75_b919858f",
        "filename": "git_auth.py",
        "patchSetId": 4
      },
      "lineNbr": 133,
      "author": {
        "id": 1560543
      },
      "writtenOn": "2024-09-17T22:26:14Z",
      "side": 1,
      "message": "The clone was successful without luci auth setup (just warning printed, but cloned repo successfully). After I luci auth\u0027ed and removed the boto-core repo, I now get:\n\n```\nTraceback (most recent call last):\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/metrics.py\", line 302, in print_notice_and_exit\n    yield\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient.py\", line 4638, in \u003cmodule\u003e\n    sys.exit(main(sys.argv[1:]))\n             ^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient.py\", line 4624, in main\n    return dispatcher.execute(OptionParser(), argv)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/subcommand.py\", line 254, in execute\n    return command(parser, args[1:])\n           ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient.py\", line 3977, in CMDsync\n    ret \u003d client.RunOnDeps(\u0027update\u0027, args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient.py\", line 2436, in RunOnDeps\n    work_queue.flush(revision_overrides,\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient_utils.py\", line 1026, in flush\n    reraise(e[0], e[1], e[2])\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient_utils.py\", line 53, in reraise\n    raise value\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient_utils.py\", line 1105, in run\n    self.item.run(*self.args, **self.kwargs)\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient.py\", line 1251, in run\n    self._got_revision \u003d self._used_scm.RunCommand(\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient_scm.py\", line 137, in RunCommand\n    return getattr(self, command)(options, args, file_list)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient_scm.py\", line 664, in wrapper\n    return_val \u003d f(*args)\n                 ^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient_scm.py\", line 814, in update\n    self.current_revision \u003d self._Clone(revision, url, options)\n                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gclient_scm.py\", line 1353, in _Clone\n    git_auth.ConfigureGlobal(\u0027/\u0027, url)\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/git_auth.py\", line 301, in ConfigureGlobal\n    ConfigChanger.new_for_remote(cwd, remote_url).apply_global(cwd)\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/git_auth.py\", line 122, in new_for_remote\n    c.mode \u003d cls._infer_mode(cwd, c._shortname + \u0027-review.googlesource.com\u0027)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/git_auth.py\", line 133, in _infer_mode\n    if not gerrit_util.LuciAuthAuthenticator.gerrit_account_exists(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gerrit_util.py\", line 856, in gerrit_account_exists\n    info \u003d GetAccountDetails(host, authenticator\u003dcls())\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gerrit_util.py\", line 1850, in GetAccountDetails\n    return ReadHttpJsonResponse(conn, accept_statuses\u003d[200, 404])\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gerrit_util.py\", line 1129, in ReadHttpJsonResponse\n    fh \u003d ReadHttpResponse(conn, accept_statuses, max_tries)\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/google/home/sokcevic/source/depot_tools/gerrit_util.py\", line 1122, in ReadHttpResponse\n    raise GerritError(response.status, reason)\ngerrit_util.GerritError: (400) Bad Request: \u003c!DOCTYPE html\u003e\u003chtml lang\u003den\u003e\u003cmeta charset\u003dutf-8\u003e\u003cmeta name\u003dviewport content\u003d\"initial-scale\u003d1, minimum-scale\u003d1, width\u003ddevice-width\"\u003e\u003ctitle\u003eError 400\u003c/title\u003e\u003cstyle\u003e*{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{color:#222;text-align:unset;margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px;}* \u003e body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}pre{white-space:pre-wrap;}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}#logo{background:url(//www.google.com/images/branding/googlelogo/1x/googlelogo_color_150x54dp.png) no-repeat;margin-left:-5px}@media only screen and (min-resolution:192dpi){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat 0% 0%/100% 100%;-moz-border-image:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) 0}}@media only screen and (-webkit-min-device-pixel-ratio:2){#logo{background:url(//www.google.com/images/branding/googlelogo/2x/googlelogo_color_150x54dp.png) no-repeat;-webkit-background-size:100% 100%}}#logo{display:inline-block;height:54px;width:150px}\u003c/style\u003e\u003cstyle\u003ebody{max-width:none;margin-top:0}\u003c/style\u003e\u003cdiv\u003e\u003ca href\u003d//www.google.com\u003e\u003cspan id\u003dlogo aria-label\u003dGoogle\u003e\u003c/span\u003e\u003c/a\u003e\u003cp\u003e\u003cb\u003e400: Bad Request\u003c/b\u003e\u003cp\u003e\u003cpre\u003eUser has no Gerrit Account. Remove user credentials from the request or visit the UI to create a Gerrit Account\u003c/pre\u003e\u003c/div\u003e\n```",
      "revId": "8b7f7ec16dbd688a72073fe56f9d721425ac7cd2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7ef4b096_7143e7a4",
        "filename": "git_auth.py",
        "patchSetId": 4
      },
      "lineNbr": 133,
      "author": {
        "id": 3355336
      },
      "writtenOn": "2024-09-17T22:57:39Z",
      "side": 1,
      "message": "Thanks, so it\u0027s still 400 and not 404.  Fixed",
      "parentUuid": "dd97dd75_b919858f",
      "revId": "8b7f7ec16dbd688a72073fe56f9d721425ac7cd2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba"
    }
  ]
}